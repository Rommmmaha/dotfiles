# =======================================================================================
# Input
# =======================================================================================
input {
  kb_layout = us, ua
  kb_options = grp:caps_toggle,fkeys:basic_13-24
  numlock_by_default = true
  follow_mouse = true
}
# =======================================================================================
# Visuals
# =======================================================================================
general {
  gaps_in = 0
  gaps_out = 0
  border_size = 0
  layout = dwindle
  resize_on_border = false
  snap {
    enabled = true
    window_gap = 25
    monitor_gap = 25
  }
}
decoration {
  shadow {
    sharp = true
    range = 1
    color = rgba(ffffff33)
  }
  blur {
    size = 2
    passes = 3
    new_optimizations = true
    noise = 0
  }
}
misc {
  disable_hyprland_logo = true
  background_color = 0
  render_unfocused_fps = 60
}
binds {
  scroll_event_delay = 0
  hide_special_on_workspace_change = true
}
group:groupbar {
  indicator_height = 0
  text_color_inactive = 0x66ffffff
  font_size = 11
  gaps_in = 0
  gaps_out = 0
}
animations:enabled = false
xwayland:force_zero_scaling = true
ecosystem{
  no_update_news = true
  no_donation_nag = true
}
# =======================================================================================
# Autostart
# =======================================================================================
exec-once = hyprlock
exec-once = eww daemon && eww open desktop_info
exec-once = hyprpaper
exec-once = kdeconnectd
exec-once = systemctl --user start hyprpolkitagent
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = sh -c "XDG_MENU_PREFIX=plasma- kbuildsycoca6 --noincremental"
exec-once = wl-clip-persist --clipboard regular
# =======================================================================================
# Keybinds
# =======================================================================================
$mainMod = SUPER
$configPath = $HOME/.config/hypr
$makeScreenshot = flameshot gui

bind = $mainMod, RETURN, exec, kitty
bind = $mainMod, E, exec, dolphin
bind = $mainMod, X, exec, code-insiders -nq
bind = $mainMod, R, exec, chezmoi apply --force

bind = $mainMod, S, exec, rofi -show drun -show-icons
bind = $mainMod, period, exec, rofi -modi "emoji:rofimoji" -show emoji
bind = , XF86Calculator, exec, rofi -show calc -modi calc -no-show-match -no-sort

bind = SUPER, ESCAPE, exit
bind = , XF86PowerOff, exit
bind = $mainMod, L, exec, hyprlock
bindi = , PRINT, exec, $makeScreenshot
bind = $mainMod SHIFT, S, exec, $makeScreenshot

bind = $mainMod, W, killactive,
bind = $mainMod, F, togglefloating,
bind = $mainMod, A, fullscreen, 1
bind = $mainMod, G, togglegroup
bind = $mainMod, Tab, cyclenext,
bind = $mainMod, Tab, bringactivetotop,

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10

{{- if eq .chezmoi.hostname "pc" }}
bind = $mainMod, GRAVE, exec, _multitool ws 8
bind = $mainMod, Q, exec, _multitool ws 9
bind = $mainMod, Z, exec, _multitool ws 10
{{- else }}
bind = $mainMod, GRAVE, exec, sh $configPath/custom/_ws.sh 8
bind = $mainMod, Q, exec, sh $configPath/custom/_ws.sh 9
bind = $mainMod, Z, exec, sh $configPath/custom/_ws.sh 10
{{- end }}

bind = $mainMod SHIFT, GRAVE, movetoworkspacesilent, 8
bind = $mainMod SHIFT, Q, movetoworkspacesilent, 9
bind = $mainMod SHIFT, Z, movetoworkspacesilent, 10

bind = $mainMod CTRL, LEFT, movewindow, l
bind = $mainMod CTRL, RIGHT, movewindow, r
bind = $mainMod CTRL, UP, movewindow, u
bind = $mainMod CTRL, DOWN, movewindow, d

bindl = SHIFT, ESCAPE, exec, playerctl play-pause

bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
# =======================================================================================
# Window Rules
# =======================================================================================
windowrule = match:float false, no_shadow on
windowrule {
  name = floating
  match:class = ^(xdg-desktop-portal-gtk|org\.freedesktop\.impl\.portal\.desktop\.kde)$
  float = on
}
windowrule {
  name = flameshot
  match:class = ^(flameshot)$
  float = on
  maximize = on
  size = 1920 1080
  center = on
  pin = on
  stay_focused = on
}
windowrule {
  name = game
  match:class = ^(gamescope|Minecraft.*|mcpelauncher-client|steam_app_.*)$
  tile = on
  content = game
  opaque = on
  force_rgbx = on
  render_unfocused = on
}
windowrule {
  name = steam
  match:class = steam
  tile = on
  suppress_event = maximize fullscreen
}
layerrule = match:namespace ^(notifications|rofi|gtk-layer-shell)$, blur on
layerrule = match:namespace ^(notifications|rofi|gtk-layer-shell)$, ignore_alpha 0
# =======================================================================================
# Import Custom Rules
# =======================================================================================
{{- if regexMatch "^(pc|laptop)$" .chezmoi.hostname }}
source = $configPath/custom/hyprland-{{ .chezmoi.hostname }}.conf
{{- end }}